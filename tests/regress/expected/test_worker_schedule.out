--start_ignore
\! gpconfig -c diskquota.naptime -v 1;
20220627:17:15:43:023295 gpconfig:wxiaoran-a01:xiwang-[INFO]:-completed successfully with parameters '-c diskquota.naptime -v 1'
\! gpconfig -c diskquota.max_workers -v 1;
20220626:22:03:07:025118 gpconfig:wxiaoran-a01:xiwang-[INFO]:-completed successfully with parameters '-c diskquota.max_workers -v 1'
\! gpstop -u;
20220626:22:03:08:025289 gpstop:wxiaoran-a01:xiwang-[INFO]:-Starting gpstop with args: -u
20220626:22:03:08:025289 gpstop:wxiaoran-a01:xiwang-[INFO]:-Gathering information and validating the environment...
20220626:22:03:08:025289 gpstop:wxiaoran-a01:xiwang-[INFO]:-Obtaining Greenplum Master catalog information
20220626:22:03:08:025289 gpstop:wxiaoran-a01:xiwang-[INFO]:-Obtaining Segment details from master...
20220626:22:03:08:025289 gpstop:wxiaoran-a01:xiwang-[INFO]:-Greenplum Version: 'postgres (Greenplum Database) 6.20.3+dev.5.g4bc90eab02 build dev'
20220626:22:03:08:025289 gpstop:wxiaoran-a01:xiwang-[INFO]:-Signalling all postmaster processes to reload
CREATE DATABASE t1;
CREATE DATABASE t2;
CREATE DATABASE t3;
CREATE DATABASE t4;
CREATE DATABASE t5;
CREATE DATABASE t6;
CREATE DATABASE t7;
--end_ignore
\c t1
CREATE EXTENSION diskquota;
CREATE TABLE f1(a int);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
INSERT into f1 SELECT generate_series(0,1000);
SELECT diskquota.wait_for_worker_new_epoch();
 wait_for_worker_new_epoch 
---------------------------
 t
(1 row)

SELECT tableid::regclass, size, segid FROM diskquota.table_size WHERE tableid = 'f1'::regclass and segid = -1;
 tableid | size  | segid 
---------+-------+-------
 f1      | 98304 |    -1
(1 row)

\c t2
CREATE EXTENSION diskquota;
CREATE TABLE f2(a int);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
INSERT into f2 SELECT generate_series(0,1000);
SELECT diskquota.wait_for_worker_new_epoch();
 wait_for_worker_new_epoch 
---------------------------
 t
(1 row)

SELECT tableid::regclass, size, segid FROM diskquota.table_size WHERE tableid = 'f2'::regclass and segid = -1;
 tableid | size  | segid 
---------+-------+-------
 f2      | 98304 |    -1
(1 row)

--start_ignore
\! gpconfig -c diskquota.naptime -v 1;
20220627:17:23:49:030288 gpconfig:wxiaoran-a01:xiwang-[INFO]:-completed successfully with parameters '-c diskquota.naptime -v 1'
\! gpconfig -c diskquota.max_workers -v 3;
20220714:16:21:00:063464 gpconfig:wxiaoran-a01:xiwang-[INFO]:-completed successfully with parameters '-c diskquota.max_workers -v 3'
\! gpstop -u;
20220714:16:21:00:063579 gpstop:wxiaoran-a01:xiwang-[INFO]:-Starting gpstop with args: -u
20220714:16:21:00:063579 gpstop:wxiaoran-a01:xiwang-[INFO]:-Gathering information and validating the environment...
20220714:16:21:00:063579 gpstop:wxiaoran-a01:xiwang-[INFO]:-Obtaining Greenplum Master catalog information
20220714:16:21:00:063579 gpstop:wxiaoran-a01:xiwang-[INFO]:-Obtaining Segment details from master...
20220714:16:21:00:063579 gpstop:wxiaoran-a01:xiwang-[INFO]:-Greenplum Version: 'postgres (Greenplum Database) 6.20.3+dev.5.g4bc90eab02 build dev'
20220714:16:21:00:063579 gpstop:wxiaoran-a01:xiwang-[INFO]:-Signalling all postmaster processes to reload
--end_ignore
\c t3
CREATE EXTENSION diskquota;
CREATE TABLE f3(a int);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
INSERT into f3 SELECT generate_series(0,1000);
SELECT diskquota.wait_for_worker_new_epoch();
 wait_for_worker_new_epoch 
---------------------------
 t
(1 row)

SELECT tableid::regclass, size, segid FROM diskquota.table_size WHERE tableid = 'f3'::regclass and segid = -1;
 tableid | size  | segid 
---------+-------+-------
 f3      | 98304 |    -1
(1 row)

\c t4
CREATE EXTENSION diskquota;
CREATE TABLE f4(a int);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
INSERT into f4 SELECT generate_series(0,1000);
SELECT diskquota.wait_for_worker_new_epoch();
 wait_for_worker_new_epoch 
---------------------------
 t
(1 row)

SELECT tableid::regclass, size, segid FROM diskquota.table_size WHERE tableid = 'f4'::regclass and segid = -1;
 tableid | size  | segid 
---------+-------+-------
 f4      | 98304 |    -1
(1 row)

\c t5
CREATE EXTENSION diskquota;
CREATE TABLE f5(a int);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
INSERT into f5 SELECT generate_series(0,1000);
SELECT diskquota.wait_for_worker_new_epoch();
 wait_for_worker_new_epoch 
---------------------------
 t
(1 row)

SELECT tableid::regclass, size, segid FROM diskquota.table_size WHERE tableid = 'f5'::regclass and segid = -1;
 tableid | size  | segid 
---------+-------+-------
 f5      | 98304 |    -1
(1 row)

\c t6
CREATE EXTENSION diskquota;
CREATE TABLE f6(a int);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
INSERT into f6 SELECT generate_series(0,1000);
SELECT diskquota.wait_for_worker_new_epoch();
 wait_for_worker_new_epoch 
---------------------------
 t
(1 row)

SELECT tableid::regclass, size, segid FROM diskquota.table_size WHERE tableid = 'f6'::regclass and segid = -1;
 tableid | size  | segid 
---------+-------+-------
 f6      | 98304 |    -1
(1 row)

\c t7
CREATE EXTENSION diskquota;
CREATE TABLE f7(a int);
NOTICE:  Table doesn't have 'DISTRIBUTED BY' clause -- Using column named 'a' as the Greenplum Database data distribution key for this table.
HINT:  The 'DISTRIBUTED BY' clause determines the distribution of data. Make sure column(s) chosen are the optimal data distribution key to minimize skew.
INSERT into f7 SELECT generate_series(0,1000);
SELECT diskquota.wait_for_worker_new_epoch();
 wait_for_worker_new_epoch 
---------------------------
 t
(1 row)

SELECT tableid::regclass, size, segid FROM diskquota.table_size WHERE tableid = 'f7'::regclass and segid = -1;
 tableid | size  | segid 
---------+-------+-------
 f7      | 98304 |    -1
(1 row)

\c t1
INSERT into f1 SELECT generate_series(0,100000);
SELECT diskquota.wait_for_worker_new_epoch();
 wait_for_worker_new_epoch 
---------------------------
 t
(1 row)

SELECT tableid::regclass, size, segid FROM diskquota.table_size WHERE tableid = 'f1'::regclass and segid = -1;
 tableid |  size   | segid 
---------+---------+-------
 f1      | 3997696 |    -1
(1 row)

\c t2
INSERT into f2 SELECT generate_series(0,100000);
SELECT diskquota.wait_for_worker_new_epoch();
 wait_for_worker_new_epoch 
---------------------------
 t
(1 row)

SELECT tableid::regclass, size, segid FROM diskquota.table_size WHERE tableid = 'f2'::regclass and segid = -1;
 tableid |  size   | segid 
---------+---------+-------
 f2      | 3997696 |    -1
(1 row)

\c t3
INSERT into f3 SELECT generate_series(0,100000);
SELECT diskquota.wait_for_worker_new_epoch();
 wait_for_worker_new_epoch 
---------------------------
 t
(1 row)

SELECT tableid::regclass, size, segid FROM diskquota.table_size WHERE tableid = 'f3'::regclass and segid = -1;
 tableid |  size   | segid 
---------+---------+-------
 f3      | 3997696 |    -1
(1 row)

\c t4
INSERT into f4 SELECT generate_series(0,100000);
SELECT diskquota.wait_for_worker_new_epoch();
 wait_for_worker_new_epoch 
---------------------------
 t
(1 row)

SELECT tableid::regclass, size, segid FROM diskquota.table_size WHERE tableid = 'f4'::regclass and segid = -1;
 tableid |  size   | segid 
---------+---------+-------
 f4      | 3997696 |    -1
(1 row)

\c t5
INSERT into f5 SELECT generate_series(0,100000);
SELECT diskquota.wait_for_worker_new_epoch();
 wait_for_worker_new_epoch 
---------------------------
 t
(1 row)

SELECT tableid::regclass, size, segid FROM diskquota.table_size WHERE tableid = 'f5'::regclass and segid = -1;
 tableid |  size   | segid 
---------+---------+-------
 f5      | 3997696 |    -1
(1 row)

\c t6
INSERT into f6 SELECT generate_series(0,100000);
SELECT diskquota.wait_for_worker_new_epoch();
 wait_for_worker_new_epoch 
---------------------------
 t
(1 row)

SELECT tableid::regclass, size, segid FROM diskquota.table_size WHERE tableid = 'f6'::regclass and segid = -1;
 tableid |  size   | segid 
---------+---------+-------
 f6      | 3997696 |    -1
(1 row)

\c t7
INSERT into f7 SELECT generate_series(0,100000);
SELECT diskquota.wait_for_worker_new_epoch();
 wait_for_worker_new_epoch 
---------------------------
 t
(1 row)

SELECT tableid::regclass, size, segid FROM diskquota.table_size WHERE tableid = 'f7'::regclass and segid = -1;
 tableid |  size   | segid 
---------+---------+-------
 f7      | 3997696 |    -1
(1 row)

--start_ignore
\c t1
DROP EXTENSION diskquota;
\c t2
DROP EXTENSION diskquota;
\c t3
DROP EXTENSION diskquota;
\c t4
DROP EXTENSION diskquota;
\c t5
DROP EXTENSION diskquota;
\c t6
DROP EXTENSION diskquota;
\c t7
DROP EXTENSION diskquota;
\c t8
DROP EXTENSION diskquota;
\c contrib_regression
DROP DATABASE t1;
DROP DATABASE t2;
DROP DATABASE t3;
DROP DATABASE t4;
\! gpconfig -r diskquota.worker_timeout;
20220626:22:03:49:026790 gpconfig:wxiaoran-a01:xiwang-[INFO]:-completed successfully with parameters '-r diskquota.worker_timeout'
\! gpstop -u;
20220626:22:03:50:026971 gpstop:wxiaoran-a01:xiwang-[INFO]:-Starting gpstop with args: -u
20220626:22:03:50:026971 gpstop:wxiaoran-a01:xiwang-[INFO]:-Gathering information and validating the environment...
20220626:22:03:50:026971 gpstop:wxiaoran-a01:xiwang-[INFO]:-Obtaining Greenplum Master catalog information
20220626:22:03:50:026971 gpstop:wxiaoran-a01:xiwang-[INFO]:-Obtaining Segment details from master...
20220626:22:03:50:026971 gpstop:wxiaoran-a01:xiwang-[INFO]:-Greenplum Version: 'postgres (Greenplum Database) 6.20.3+dev.5.g4bc90eab02 build dev'
20220626:22:03:50:026971 gpstop:wxiaoran-a01:xiwang-[INFO]:-Signalling all postmaster processes to reload
--end_ignore
